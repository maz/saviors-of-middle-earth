// Generated by CoffeeScript 1.4.0
(function() {

  window.addEventListener('load', function() {
    var button, _i, _len, _ref, _results;
    _ref = document.querySelectorAll('.item-communicate-button');
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      button = _ref[_i];
      _results.push((function(button) {
        return button.addEventListener('click', function() {
          var xhr;
          xhr = new XMLHttpRequest;
          xhr.open('post', "/items/" + (button.getAttribute('data-item')) + "/communicate", true);
          xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
          xhr.onload = function() {
            var id;
            id = parseInt(xhr.responseText);
            MessagingLoadCommunique(id);
            return MessagingToggle();
          };
          return xhr.send("csrf_token=" + (encodeURIComponent(document.body.getAttribute('data-csrf-token'))));
        }, false);
      })(button));
    }
    return _results;
  }, false);

}).call(this);
